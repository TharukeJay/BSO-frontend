---
const { product } = Astro.props;

const addToCart = async (productId) => {
    const response = await fetch('/api/cart/add', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ productId }),
    });

    if (response.ok) {
        alert('Product added to cart!');
    } else {
        alert('Failed to add product to cart.');
    }
};
---

<div class="product-card">
    <img src={product.image.url} alt={product.title} />
    <h2>{product.title}</h2>
    <p>Price: ${product.price}</p>
    <button onclick="addToCart({product.id})">Add to Cart</button>
</div>
